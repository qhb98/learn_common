## 遗传算法 Genetic Algorithm

### 一、基本概念

GA 是模拟生物在自然环境中的遗传和进化的过程而形成的自适应全局优化搜索算法.
本质是一种群体搜索技术, 根据适者生存的原则逐代进化, 最终得到最优解或者准最优解, 是一种并行、高效、全局搜索的方法.

核心:

    + 交叉
    + 变异

### 二、基本流程

2.1 编码 encode  
二进制编码方法在交叉时产生新个体的可能性比浮点编码更大, 但是对于多维、高精度要求的连续函数优化问题会显得非常不利, 因为存在
连续函数离散化时的映射误差. 二进制串长度短时的解可能会达不到精度要求, 但如果过长又会导致解的搜索空间急剧扩大, 所以高精度、
连续函数优化问题浮点数编码方式更适合.

    根据不同的问题, 将问题的可行解, 抽象编码为适用于遗传算法的形式  
    
    二进制编码: 用一个二进制串表示这个十进制数值  
    + 给定数值解的区间范围: [1, 10]  
    + 给定精度: 1e-5, 两个数值解的间隔  
    + 进行编码: 为每个数值解分配一个独一无二的二进制串  
    
    要想实现每个数值都能分配一个独一无二的二进制串, 那么串所能表示的数值个数就要大于等于数值解的个数, 
    一个长度为n的串, 可以表示 2^n 个数值.
    区间范围为[1, 10], 长度为2的二进制串提供的精度  ==> (10 - 1) / (2^2 - 1) = 3  
    即可得 --> 数值区间长度为L, 精度为E的条件下, 二进制串的长度n, 三者之间的关系为: L / (2^n - 1) <= E  
    要想达到1e-5的精度, 对于区间长度为10, 串的长度n应该满足 10 / (2^n - 1) <= 0.00001  

    格雷码编码: 连续的两个整数对应的编码之间只有一个码位不同, 其余码位完全一致, 是二进制编码方法的一种变形.  
    + 二进制码转格雷码 -->  g_m = b_m g_i = b_i+1 异或 b_i, i = m -1, m - 2, ..., 2, 1
    + 格雷码转二进制码  -->  b_m = g_m  b_i = b_i+1 异或 g_i, i=m-1, m-2, ..., 2, 1
    + 增强了遗传算法的局部搜索能力, 便于连续函数的局部空间搜索

    浮点数编码/实数编码: 个体的基因值用某一个范围内的一个浮点数表示, 编码长度等于决策变量个数.
    + 适用于求解范围较大的数、精度要求较高、搜索空间较大、复杂的决策变量约束条件、连续参数优化、连续渐变问题等
    + 
    
    符号编码: 个体染色体编码串中的基因值取自一个无数值含义、只有代码含义的符号集

    排列编码/序列编码: 针对特殊问题的特定编码方式, 将有限集合内的元素进行排列

    复数编码:   

    DNA编码:  
    
    多参数级联编码:  

2.2 解码

    二进制串的索引: 就是在问当前串是第几个串, 可以使用二进制转十进制得到.  
    一般的, 区间范围为[a, b], 区间长度为L, 即 L=b - a, 串长为n, 当前串对应十进制为T, 则该串对应实值解为: X = a + T * (b - a) / (2^n - 1)

![解码过程示意图](/or/heuristic_algorithm/遗传算法/ga_figure/解码过程示意图.png)

2.3 适应度 fitness

    个体适应度fitness: 个体在种群生存的优势程度度量, 用于区分个体的好坏. 使用适应度函数/评价函数来计算.
    评价一个个体的适应度的一般过程:
    + 对个体编码串进行解码处理后, 可得到个体的表现型
    + 由个体的表现型可计算出对应个体的目标函数值
    + 由目标函数值按照一定的转换规则求出个体的适应度

    设计要求: 单值、连续、非负、最大化、合理、一致性、计算量小、通用性强等  --> 避免出现欺骗现象, 导致初期个别超常适应度个体控制
    选择过程, 或者后期个体差异太小破坏种群多样性, 导致陷入局部峰值

    适应度函数的尺度变换 --> 防止适应度计算过程中适应度的值分布不合理或者难以体现个体的特性, 可以进行适应度的尺度变换调整,
    变换方法包括线性变换、幂函数变换、指数变换、Goldberg线性拉伸变换等

2.4 选择select
用于确定如何从父代群体中按某种方法选取哪些个体作为父母, 然后进行交配, 产生新的个体的过程.

    个体选择概率的分配方法:
    + 按比例的适应度选择 proportional fitness assignment
    + 按排序的适应度选择 rank-based fitness assignment
    + 常用的选择方法
        + 轮盘赌 roulette wheel selection
        + 随机遍历抽样 stochastic universal sampling
        + 锦标赛选择法 tournament selection

2.5 交叉crossover

    + 按顺序, 两两个体之间按概率交叉  
    + 除了两两交叉, 也可以三三、五五交叉  
    + 对适应度高的前N/2个体、甚至N/4的个体之间相互交叉  
    + 不一定是按顺序交叉, 也可以对每个个体随机从前N/2中选一个个体进行交叉  
    + 既可以一段交叉, 也可以多段交叉  

2.6 变异mutation   
-- 就是对个体的某个或某段基因进行随机变换, 得到新的个体, 也就是新的一组解  
-- 经过变异之后, 新的那段基因, 可能是和原先种群中所有的个体中, 所对应的所有基因中, 有重合的  
这就意味着, 这次变异是没有意义的变异, 并没有产生新的解, 还是和原来的有的解一样

    + 每个个体都进行变异  
    + 既可以对适应度低的后N/4的, 也可以对后N/2个个体变异  
    + 不一定必须要变异, 也可以按照适应度大小映射为概率变异  
    + 不一定是只有一个位点变异, 也可以是多个位点变异  

### 三、轮盘赌

轮盘赌选择法（roulette wheel selection）是最简单也是最常用的选择方法,
在该方法中, 各个个体的选择概率和其适应度值成比例, 适应度越大, 选中概率也越大.  
但实际在进行轮盘赌选择时个体的选择往往不是依据个体的选择概率, 而是根据“累积概率”来进行选择.

![轮盘赌](/or/heuristic_algorithm/遗传算法/ga_figure/轮盘赌.png)

### 四、tips

### 五、研究进展

### 六、模式定理
模式是指种群个体基因串中的相似样板, 用来描述基因串中某些特征位相同的结构. 在二进制编码中, 模式是基于
三个字符集(0, 1, *)的字符串, 符号*代表任意字符, 即 0或1.  
模式定理: 具有低阶、短定义距以及平均适应度高于种群平均适应度的模式在子代中呈指数增长.  
模式定理保证了较优的模式(遗传算法的较优解)的数目呈指数增长, 为解释遗传算法的机理提供了数学基础.  



### 七、汉明悬崖 hamming cliff
汉明悬崖是二进制编码的一个缺点, 就是在某些相邻整数的二进制代码之间有很大的汉明距离, 使得遗传算法的交叉和突变都难以跨越.  
格雷码可以克服这个问题, 在相邻整数之间汉明距离都为1, 但是汉明距离在整数之间的差并非单调增加, 引入了另一层次的隐悬崖.

汉明距离就是 将一个字符串变换为另一个字符串所需要替换的字符个数.


### 参考资料

https://space.bilibili.com/294132471/video  
https://blog.csdn.net/weixin_30239361/article/details/101529599  











